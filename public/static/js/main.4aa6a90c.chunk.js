(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{138:function(t,e,n){},254:function(t,e,n){"use strict";n.r(e);var o=n(2),c=n(0),r=n.n(c),a=n(8),i=n.n(a),s=n(16),l=n(17),u=n(19),h=n(18),j=(n(138),n(27)),y=n(11);function d(t){var e=t.toy,n=t.onDelete;return Object(o.jsxs)("li",{children:[Object(o.jsx)("h3",{children:e.name}),Object(o.jsx)("h4",{children:e.price}),Object(o.jsx)("button",{children:Object(o.jsx)(j.b,{to:"/toy/".concat(e._id),children:"Details"})}),Object(o.jsx)("button",{children:Object(o.jsx)(j.b,{to:"/toy/edit/".concat(e._id),children:"Edit"})}),Object(o.jsx)("button",{onClick:function(){return n(e._id)},children:"Delete"})]})}function p(t){var e=t.toys,n=t.onDelete;return Object(o.jsx)("div",{children:Object(o.jsx)("ul",{className:"toy-list",children:e.map((function(t){return Object(o.jsx)(d,{toy:t,onDelete:n},t._id)}))})})}var b=n(20),O=n(25),f=n(290),v=n(289),x=n(280),m=n(286),g=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(s.a)(this,n);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={type:t.props.type},t}return Object(l.a)(n,[{key:"render",value:function(){return console.log("get from props",this.props.type),Object(o.jsx)("div",{children:Object(o.jsxs)(x.a,{style:{minWidth:120},children:[Object(o.jsx)(f.a,{id:"demo-simple-select-label",children:"Type"}),Object(o.jsxs)(m.a,{value:this.props.type+"",onChange:this.props.onhandleChange,name:"type",children:[Object(o.jsx)(v.a,{value:"All",children:"All"}),Object(o.jsx)(v.a,{value:"Educational",children:"Educational"}),Object(o.jsx)(v.a,{value:"Funny",children:"Funny"}),Object(o.jsx)(v.a,{value:"Adult",children:"Adult"})]})]})})}}]),n}(c.Component),T=n(292),S=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(s.a)(this,n);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={filterBy:{}},t.handleChange=function(e){var n=Object(b.a)({},t.state.filterBy),o=e.target.value;"checkbox"===e.target.type&&(o="true"===e.target.value),n[e.target.name]=o,t.setState({filterBy:n},(function(){t.props.onSetFilter(t.state.filterBy)}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.filterBy;this.setState({filterBy:t})}},{key:"render",value:function(){console.log("filterBy",this.state.filterBy);var t=this.state.filterBy;return Object(o.jsxs)("div",{children:[Object(o.jsx)(g,{type:t.type,onhandleChange:this.handleChange}),Object(o.jsxs)("div",{className:"inStock-filter",children:[Object(o.jsx)("input",{type:"checkbox",name:"inStock",value:!t.inStock,onChange:this.handleChange,checked:t.inStock}),Object(o.jsx)("label",{htmlFor:"inStock",children:"In stock"})]}),Object(o.jsx)(T.a,{type:"text",name:"searchTxt",value:t.searchTxt,onChange:this.handleChange,placeholder:"Search by name..."}),Object(o.jsx)("div",{children:Object(o.jsxs)(m.a,{name:"sortBy",onChange:this.handleChange,value:t.sortBy+"",children:[Object(o.jsx)(v.a,{value:"name",defaultValue:!0,children:"Name"}),Object(o.jsx)(v.a,{value:"price",children:"Price"})]})})]})}}]),n}(c.Component),k=Object(O.b)((function(t){return{filterBy:t.toyReducer.filterBy}}))(S),C=n(118),E=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this.props.toys.filter((function(t){return"Educational"===t.type})).length,e=this.props.toys.reduce((function(t,e){return"Educational"===e.type?t+e.price:t}),0)/t,n=this.props.toys.filter((function(t){return"Funny"===t.type})).length,c=this.props.toys.reduce((function(t,e){return"Funny"===e.type?t+e.price:t}),0)/n,r=this.props.toys.filter((function(t){return"Adult"===t.type})).length,a={labels:["Educational","Funny","Adult"],datasets:[{data:[e,c,this.props.toys.reduce((function(t,e){return"Adult"===e.type?t+e.price:t}),0)/r],backgroundColor:["#FF6384","#36A2EB","#FFCE56"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]};return Object(o.jsxs)("div",{className:"toy-chart",children:[Object(o.jsx)("h4",{children:"Average prices of toys"}),Object(o.jsx)(C.Doughnut,{data:a,options:{responsive:!1,maintainAspectRatio:!0,width:"800",height:"800"}})]})}}]),n}(c.Component),B={loadFromStorage:function(t){var e=localStorage.getItem(t);return e?JSON.parse(e):null},saveToStorage:function(t,e){localStorage[t]=JSON.stringify(e)}};var A=n(52),F=n.n(A),_={query:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return F.a.get("".concat(D),{params:t}).then((function(t){return I(t.data),t.data}))},getById:function(t){return F.a.get("".concat(D,"/").concat(t)).then((function(t){return t.data}))},delToy:function(t){return F.a.delete("".concat(D,"/").concat(t)).then((function(t){return t.data}))},saveToy:function(t){if(t._id)return F.a.put("".concat(D,"/").concat(t._id),t).then();return t.createdAt=Date.now(),F.a.post("".concat(D),t).then((function(t){return t.data}))}},D="/api/toy";function I(t){B.saveToStorage("toysDB",t)}var w=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(s.a)(this,n);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).onSetFilter=function(e){t.props.loadToys(e)},t.onDelete=function(e){t.props.deleteToy(e)},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){console.log("FILTER",this.props.filterBy),this.props.loadToys(this.props.filterBy),console.log("Got from store:",this.props)}},{key:"render",value:function(){var t=this.props.toys;return t?Object(o.jsxs)("section",{className:"main",children:[Object(o.jsxs)("div",{className:"toys-filter-list",children:[Object(o.jsx)(k,{onSetFilter:this.onSetFilter}),Object(o.jsx)("button",{className:"adding",children:Object(o.jsx)(j.b,{to:"/toys/add",children:"Add toy"})}),Object(o.jsx)(p,{toys:t,onDelete:this.onDelete})]}),Object(o.jsxs)("div",{className:"charts",children:[Object(o.jsx)(E,{toys:t}),Object(o.jsx)(E,{toys:t})]})]}):Object(o.jsx)("h2",{children:"Loading toys..."})}}]),n}(c.Component),N={loadToys:function(t){return function(e){return _.query(t).then((function(n){e({type:"SET_TOYS",toys:n,newFilterBy:t})}))}},deleteToy:function(t){return function(e){return _.delToy(t).then((function(){e({type:"DELETE_TOY",toyId:t})}))}}},R=Object(O.b)((function(t){return{toys:t.toyReducer.toys,filterBy:t.toyReducer.filterBy}}),N)(w);n(29),n(288);var Y=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(s.a)(this,n);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={toy:{name:"",price:0,type:"",createdAt:"",inStock:!0}},t.loadToy=function(e){_.getById(e).then((function(e){console.log(e),t.setState({toy:e})}))},t.onSaveToy=function(e){e.preventDefault(),t.props.saveToy(t.state.toy),t.props.history.push("/toy")},t.onInputChange=function(e){console.log("EVENT.TARGTE.VALUE",e.target.value);var n="number"===e.target.type?+e.target.value:e.target.value;"checkbox"===e.target.type&&(n="true"===e.target.value),console.log("ev.target.value",e.target.value);var o=Object(b.a)({},t.state.toy);o[e.target.name]=n,t.setState({toy:o})},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.match.params.toyId;console.log("Seaech toyId",t),t&&this.loadToy(t)}},{key:"render",value:function(){var t=this.state.toy;return t?Object(o.jsx)("div",{children:Object(o.jsxs)("form",{onSubmit:this.onSaveToy,children:[Object(o.jsx)("input",{value:t.name,type:"text",placeholder:"Enter toy name...",name:"name",onChange:this.onInputChange}),Object(o.jsx)("input",{value:t.price,type:"number",name:"price",onChange:this.onInputChange}),Object(o.jsxs)("select",{name:"type",id:"",onChange:this.onInputChange,value:t.type,children:[Object(o.jsx)("option",{value:"Educational",children:"Educational"}),Object(o.jsx)("option",{value:"Funny",children:"Funny"}),Object(o.jsx)("option",{value:"Adult",children:"Adult"})]}),Object(o.jsx)("label",{htmlFor:"inStock",children:"Is in stock?"}),Object(o.jsx)("input",{type:"checkbox",name:"inStock",value:!t.inStock,onChange:this.onInputChange,checked:t.inStock}),Object(o.jsx)("button",{type:"submit",children:"Save"})]})}):Object(o.jsx)("h3",{children:"Loading..."})}}]),n}(c.Component),L={saveToy:function(t){return function(e){return _.saveToy(t).then((function(n){n?e({type:"SAVE_TOY",newToy:n}):e({type:"UPD_TOY",newToy:t})}))}}},M=Object(O.b)((function(t){return{toys:t.toyReducer.toys}}),L)(Y),P=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(s.a)(this,n);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={toy:{}},t.loadToy=function(e){var n=t.props.toys.find((function(t){return t._id=e}));t.setState({toy:n})},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.match.params.toyId;this.loadToy(t)}},{key:"render",value:function(){var t=this,e=this.state.toy;return e?Object(o.jsxs)("div",{className:"toy-details",children:[Object(o.jsxs)("h3",{children:["Title: ",e.name]}),Object(o.jsxs)("h3",{children:["Price: ",e.price]}),Object(o.jsxs)("h3",{children:["Type: ",e.type]}),Object(o.jsxs)("h3",{children:[e.inStock?"IN":"NOT IN"," stock"]}),Object(o.jsx)("button",{onClick:function(){return t.props.history.push("/toy")},children:"Go Back"})]}):Object(o.jsx)("h2",{children:"Loading..."})}}]),n}(c.Component),V=[{path:"/",component:R},{path:"/toy",component:R},{path:"/toy/:toyId",component:Object(O.b)((function(t){return{toys:t.toyReducer.toys}}))(P)},{path:"/toy/edit/:toyId?",component:M},{path:"/toys/add",component:M}],J=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this.props.toys;return Object(o.jsxs)("header",{children:[Object(o.jsx)("nav",{children:Object(o.jsx)(j.b,{to:"/toy",children:"TOYs"})}),Object(o.jsx)("h2",{children:"Welcome to Toys Project!"}),Object(o.jsxs)("h3",{children:["We have ",t.length," toys in our project:)"]})]})}}]),n}(c.Component),U=Object(O.b)((function(t){return{toys:t.toyReducer.toys}}))(J),G=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(o.jsxs)("main",{children:[Object(o.jsx)(U,{}),Object(o.jsx)(j.a,{children:Object(o.jsx)(y.c,{children:V.map((function(t){return Object(o.jsx)(y.a,{exact:!0,component:t.component,path:t.path},t.path)}))})})]})}}]),n}(c.Component),W=n(121),q=n(46),X=n(57),z={toys:[],filterBy:{type:"All",inStock:!1,searchTxt:"",sortBy:"name"}};var H=Object(q.c)({toyReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_TOYS":return Object(b.a)(Object(b.a)({},t),{},{filterBy:e.newFilterBy,toys:e.toys});case"DELETE_TOY":return Object(b.a)(Object(b.a)({},t),{},{toys:t.toys.filter((function(t){return t._id!==e.toyId}))});case"UPD_TOY":var n=t.toys.findIndex((function(t){return t._id=e.newToy._id}));return Object(b.a)(Object(b.a)({},t),{},{toys:[].concat(Object(X.a)(t.toys.slice(0,n)),[e.newToy],Object(X.a)(t.toys.slice(n+1)))});case"SAVE_TOY":return console.log(Object(b.a)(Object(b.a)({},t),{},{toys:[].concat(Object(X.a)(t.toys),[e.newToy])})),Object(b.a)(Object(b.a)({},t),{},{toys:[].concat(Object(X.a)(t.toys),[e.newToy])});default:return t}}}),K=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||q.d,Q=Object(q.e)(H,K(Object(q.a)(W.a)));i.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(O.a,{store:Q,children:Object(o.jsx)(j.a,{children:Object(o.jsx)(G,{})})})}),document.getElementById("root"))}},[[254,1,2]]]);
//# sourceMappingURL=main.4aa6a90c.chunk.js.map